<div class="listar-solicitacoes-container">
  <div class="header">
    <h1>Minhas Solicitações</h1>
    <button mat-raised-button color="primary" (click)="novaSolicitacao()">
      <mat-icon>add</mat-icon>
      Nova Solicitação
    </button>
  </div>

  @if (carregando()) {
    <div class="loading">Carregando...</div>
  } @else if (solicitacoes().length === 0) {
    <mat-card class="empty-state">
      <mat-card-content>
        <p>Você ainda não possui solicitações.</p>
        <button mat-raised-button color="primary" (click)="novaSolicitacao()">
          Criar Primeira Solicitação
        </button>
      </mat-card-content>
    </mat-card>
  } @else {
    <div class="solicitacoes-grid">
      @for (solicitacao of solicitacoes(); track solicitacao.id) {
        <mat-card class="solicitacao-card" (click)="verDetalhes(solicitacao.id)">
          <mat-card-header>
            <mat-card-title>{{ solicitacao.titulo }}</mat-card-title>
            <mat-card-subtitle>Protocolo: {{ solicitacao.protocolo }}</mat-card-subtitle>
          </mat-card-header>

          <mat-card-content>
            <div class="status-row">
              <mat-chip [highlighted]="true" [color]="getStatusColor(solicitacao.status)">
                {{ getStatusLabel(solicitacao.status) }}
              </mat-chip>
              <span class="data">{{ solicitacao.updatedAt | date:'dd/MM/yyyy HH:mm' }}</span>
            </div>
            <p class="descricao">{{ solicitacao.descricao }}</p>
          </mat-card-content>

          <mat-card-actions>
            <button mat-button color="primary">
              <mat-icon>visibility</mat-icon>
              Ver Detalhes
            </button>
          </mat-card-actions>
        </mat-card>
      }
    </div>
  }
</div>
